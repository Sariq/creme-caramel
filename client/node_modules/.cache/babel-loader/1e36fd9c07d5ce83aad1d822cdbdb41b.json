{"ast":null,"code":"import _initializerDefineProperty from \"/Users/sariq/projects/us-dv/client/us-dv/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"/Users/sariq/projects/us-dv/client/us-dv/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/sariq/projects/us-dv/client/us-dv/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _temp;\n\nimport { observable, action, computed } from \"mobx\";\nimport ConfigStore from \"./configStore\";\nconst apis = {\n  login(data) {\n    return fetch(ConfigStore.configData.domain + 'api/users/login/', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"user\": {\n          \"userName\": data.userName,\n          \"password\": data.password\n        }\n      })\n    }).then(response => response.json()).then(responseJson => {\n      if (responseJson.user) {\n        console.log(responseJson.user);\n      } else {}\n\n      return responseJson;\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n\n  logOut(data) {\n    return fetch(ConfigStore.configData.domain + 'api/users/signOut/', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Token ' + data.token\n      },\n      body: JSON.stringify({\n        \"user\": data\n      })\n    }).then(response => response.json()).then(responseJson => {\n      console.log(responseJson);\n    }).catch(error => {\n      console.log(error);\n    });\n  },\n\n  getUserdata(data) {\n    return fetch(ConfigStore.configData.domain + 'api/users/current/', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Token ' + data.token\n      },\n      body: JSON.stringify({\n        \"user\": data\n      })\n    }).then(response => response.json()).then(responseJson => {\n      console.log(responseJson);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n};\nlet AuthStore = (_class = (_temp = class AuthStore {\n  constructor() {\n    _initializerDefineProperty(this, \"authData\", _descriptor, this);\n  }\n\n  login(data) {\n    return apis.login(data).then(data => {\n      if (data) {\n        this.setUserDataLocal(data);\n      }\n\n      ;\n    });\n  }\n\n  getUserDataLocal() {\n    this.authData = JSON.parse(localStorage.getItem('authData'));\n    return this.authData;\n  }\n\n  setUserDataLocal(data) {\n    localStorage.setItem('authData', JSON.stringify(data));\n    this.authData = data;\n\n    if (!this.authData.user.userData.registrationData) {\n      this.authData.user.userData.registrationData = {};\n    }\n\n    if (!this.authData.user.userData.applicationData) {\n      this.authData.user.userData.applicationData = {};\n    }\n\n    this.authData.user.userData.registrationData = data.user.userData.registrationData;\n    console.log(this.authData);\n  }\n\n  initLogin() {\n    this.authData = JSON.parse(localStorage.getItem('authData'));\n  }\n\n  logOut() {\n    return apis.logOut(this.authData.user).then(() => {\n      localStorage.setItem('authData', null);\n      this.authData = null;\n    });\n  }\n\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"authData\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return null;\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"login\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"login\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"getUserDataLocal\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"getUserDataLocal\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"setUserDataLocal\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"setUserDataLocal\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"initLogin\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"initLogin\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"logOut\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"logOut\"), _class.prototype)), _class);\nexport default new AuthStore();","map":{"version":3,"sources":["/Users/sariq/projects/us-dv/client/us-dv/src/stores/AuthStore.js"],"names":["observable","action","computed","ConfigStore","apis","login","data","fetch","configData","domain","method","headers","Accept","body","JSON","stringify","userName","password","then","response","json","responseJson","user","console","log","catch","error","logOut","token","getUserdata","AuthStore","setUserDataLocal","getUserDataLocal","authData","parse","localStorage","getItem","setItem","userData","registrationData","applicationData","initLogin"],"mappings":"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","sourcesContent":["import { observable, action, computed} from \"mobx\";\nimport ConfigStore from \"./configStore\"\n\nconst apis = {\n    login(data){\n      return fetch(ConfigStore.configData.domain + 'api/users/login/', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          \"user\": {\n            \"userName\": data.userName,\n            \"password\": data.password\n          }\n        }),\n      })\n      .then((response) => response.json())\n      .then((responseJson) => {\n        if(responseJson.user){\n          console.log(responseJson.user)\n          \n        }else{\n         \n        }        \n        return responseJson;\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n    },\n    logOut(data){\n        return fetch(ConfigStore.configData.domain + 'api/users/signOut/', {\n            method: 'POST',\n            headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/json',\n              'Authorization': 'Token ' + data.token\n\n            },\n            body: JSON.stringify({\n              \"user\": data\n            }),\n          })\n          .then((response) => response.json())\n          .then((responseJson) => {\n            console.log(responseJson)\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n    },\n    getUserdata(data){\n        return fetch(ConfigStore.configData.domain + 'api/users/current/', {\n            method: 'POST',\n            headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/json',\n              'Authorization': 'Token ' + data.token\n\n            },\n            body: JSON.stringify({\n              \"user\": data\n            }),\n          })\n          .then((response) => response.json())\n          .then((responseJson) => {\n            console.log(responseJson)\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n    }\n}\nclass AuthStore {\n    @observable authData=null;\n\n    @action login (data) {\n        return apis.login(data).then((data)=>{\n            if(data){\n                this.setUserDataLocal(data)};\n            });\n    };\n    @action getUserDataLocal () {\n        this.authData = JSON.parse(localStorage.getItem('authData'));\n        return this.authData;\n    };\n    @action setUserDataLocal (data) {\n        localStorage.setItem('authData', JSON.stringify(data));\n        this.authData = data;\n        if(!this.authData.user.userData.registrationData){\n            this.authData.user.userData.registrationData = {};\n        }\n        if(!this.authData.user.userData.applicationData){\n            this.authData.user.userData.applicationData = {};\n        }\n        this.authData.user.userData.registrationData = data.user.userData.registrationData\n        console.log(this.authData)\n    };\n    @action initLogin () {\n        this.authData = JSON.parse(localStorage.getItem('authData'));\n    };\n    @action logOut () {\n        return apis.logOut(this.authData.user).then(()=>{\n            localStorage.setItem('authData',null);\n            this.authData = null;\n        });\n    }\n}\nexport default new AuthStore();\n\n"]},"metadata":{},"sourceType":"module"}