{"ast":null,"code":"import _initializerDefineProperty from \"/Users/sariq/projects/us-dv/client/us-dv/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"/Users/sariq/projects/us-dv/client/us-dv/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/sariq/projects/us-dv/client/us-dv/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _temp;\n\nimport { observable, action, computed } from \"mobx\";\nimport ConfigStore from \"./configStore\";\nimport AuthStore from \"./AuthStore\";\nconst apis = {\n  applyApplication(data) {\n    console.log(data);\n    return fetch(ConfigStore.configData.domain + 'api/users/applyApplication', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Token ' + AuthStore.authData.user.token\n      },\n      body: JSON.stringify({\n        \"applicationObj\": {\n          \"userName\": AuthStore.authData.user.userName,\n          \"applicationData\": data\n        }\n      })\n    }).then(response => response.json()).then(responseJson => {\n      if (responseJson) {\n        console.log(responseJson);\n        AuthStore.setUserDataLocal(responseJson); //AuthStore.setUserDataLocal(responseJson);\n        //AuthStore.login();\n      } else {}\n\n      return responseJson;\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n\n  register(data) {\n    return fetch(ConfigStore.configData.domain + 'api/users/', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"user\": data\n      })\n    }).then(response => response.json()).then(responseJson => {\n      if (responseJson.user) {\n        console.log(responseJson);\n        AuthStore.setUserDataLocal(responseJson); //AuthStore.login();\n      } else {}\n\n      return responseJson;\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n};\n\nclass applicationData {\n  constructor() {\n    this.applicantInfo = {};\n    this.spouseInfo = {};\n    this.childrenInfo = [];\n    this.addressContact = {};\n  }\n\n}\n\n;\nlet registrationStore = (_class = (_temp = class registrationStore {\n  constructor() {\n    _initializerDefineProperty(this, \"registrationData\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"applicationData\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"registerInProgress\", _descriptor3, this);\n  }\n\n  registerUser() {\n    this.registerInProgress = true;\n    return apis.register(this.registrationData.personalDetails).then(data => {\n      return data;\n    }).finally(() => this.registerInProgress = false);\n  }\n\n  sendApplication() {\n    this.registerInProgress = true;\n    return apis.applyApplication(this.applicationData).then(data => {\n      return data;\n    }).finally(() => this.registerInProgress = false);\n  }\n\n  handleApplicantDataChange(attr, value) {\n    this.applicationData.applicantInfo[attr] = value;\n  }\n\n  handleDataChange(attr, value, obj) {\n    this.applicationData[obj][attr] = value;\n  }\n\n  initApplicationData() {\n    this.applicationData = AuthStore.authData.user.userData.applicationData;\n  }\n\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"registrationData\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return {\n      personalDetails: {},\n      paymentData: {}\n    };\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"applicationData\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return new applicationData();\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"registerInProgress\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return false;\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"registerUser\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"registerUser\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"sendApplication\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"sendApplication\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"handleApplicantDataChange\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"handleApplicantDataChange\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"handleDataChange\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"handleDataChange\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"initApplicationData\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"initApplicationData\"), _class.prototype)), _class); //export default registrationStore;\n\nexport default new registrationStore();","map":{"version":3,"sources":["/Users/sariq/projects/us-dv/client/us-dv/src/stores/registrationStore.js"],"names":["observable","action","computed","ConfigStore","AuthStore","apis","applyApplication","data","console","log","fetch","configData","domain","method","headers","Accept","authData","user","token","body","JSON","stringify","userName","then","response","json","responseJson","setUserDataLocal","catch","error","register","applicationData","applicantInfo","spouseInfo","childrenInfo","addressContact","registrationStore","registerUser","registerInProgress","registrationData","personalDetails","finally","sendApplication","handleApplicantDataChange","attr","value","handleDataChange","obj","initApplicationData","userData","paymentData"],"mappings":";;;;;;AAAA,SAASA,UAAT,EAAqBC,MAArB,EAA6BC,QAA7B,QAA4C,MAA5C;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AAEA,MAAMC,IAAI,GAAG;AACTC,EAAAA,gBAAgB,CAACC,IAAD,EAAO;AACnBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,WAAOG,KAAK,CAACP,WAAW,CAACQ,UAAZ,CAAuBC,MAAvB,GAAgC,4BAAjC,EAA+D;AACvEC,MAAAA,MAAM,EAAE,MAD+D;AAEvEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB,kBAFT;AAGP,yBAAiB,WAAWX,SAAS,CAACY,QAAV,CAAmBC,IAAnB,CAAwBC;AAH7C,OAF8D;AAOvEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB,0BAAkB;AACd,sBAAWjB,SAAS,CAACY,QAAV,CAAmBC,IAAnB,CAAwBK,QADrB;AAEd,6BAAkBf;AAFJ;AADC,OAAf;AAPiE,KAA/D,CAAL,CAcJgB,IAdI,CAcEC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAdf,EAeJF,IAfI,CAeEG,YAAD,IAAkB;AACtB,UAAGA,YAAH,EAAgB;AACdlB,QAAAA,OAAO,CAACC,GAAR,CAAYiB,YAAZ;AACAtB,QAAAA,SAAS,CAACuB,gBAAV,CAA2BD,YAA3B,EAFc,CAId;AACA;AACD,OAND,MAMK,CAEJ;;AACD,aAAOA,YAAP;AACD,KA1BI,EA2BJE,KA3BI,CA2BGC,KAAD,IAAW;AAChBrB,MAAAA,OAAO,CAACqB,KAAR,CAAcA,KAAd;AACD,KA7BI,CAAP;AA8BH,GAjCQ;;AAkCTC,EAAAA,QAAQ,CAAEvB,IAAF,EAAO;AACX,WAAOG,KAAK,CAACP,WAAW,CAACQ,UAAZ,CAAuBC,MAAvB,GAAgC,YAAjC,EAA+C;AACvDC,MAAAA,MAAM,EAAE,MAD+C;AAEvDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB;AAFT,OAF8C;AAMvDI,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB,gBAAQd;AADW,OAAf;AANiD,KAA/C,CAAL,CAUJgB,IAVI,CAUEC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAVf,EAWJF,IAXI,CAWEG,YAAD,IAAkB;AACtB,UAAGA,YAAY,CAACT,IAAhB,EAAqB;AACnBT,QAAAA,OAAO,CAACC,GAAR,CAAYiB,YAAZ;AACAtB,QAAAA,SAAS,CAACuB,gBAAV,CAA2BD,YAA3B,EAFmB,CAGnB;AACD,OAJD,MAIK,CAEJ;;AACD,aAAOA,YAAP;AACD,KApBI,EAqBJE,KArBI,CAqBGC,KAAD,IAAW;AAChBrB,MAAAA,OAAO,CAACqB,KAAR,CAAcA,KAAd;AACD,KAvBI,CAAP;AAwBH;;AA3DQ,CAAb;;AA6DA,MAAME,eAAN,CAAqB;AAAA;AAAA,SACjBC,aADiB,GACH,EADG;AAAA,SAEjBC,UAFiB,GAEN,EAFM;AAAA,SAGjBC,YAHiB,GAGJ,EAHI;AAAA,SAIjBC,cAJiB,GAIF,EAJE;AAAA;;AAAA;;AAKpB;IACKC,iB,sBAAN,MAAMA,iBAAN,CAAwB;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAOZC,EAAAA,YAAR,GAAuB;AACnB,SAAKC,kBAAL,GAA0B,IAA1B;AACA,WAAOjC,IAAI,CAACyB,QAAL,CAAc,KAAKS,gBAAL,CAAsBC,eAApC,EAAqDjB,IAArD,CAA2DhB,IAAD,IAAQ;AACrE,aAAOA,IAAP;AACH,KAFM,EAEJkC,OAFI,CAEI,MAAI,KAAKH,kBAAL,GAA0B,KAFlC,CAAP;AAGH;;AACOI,EAAAA,eAAR,GAA2B;AACvB,SAAKJ,kBAAL,GAA0B,IAA1B;AACA,WAAOjC,IAAI,CAACC,gBAAL,CAAsB,KAAKyB,eAA3B,EAA4CR,IAA5C,CAAkDhB,IAAD,IAAQ;AAC5D,aAAOA,IAAP;AACH,KAFM,EAEJkC,OAFI,CAEI,MAAI,KAAKH,kBAAL,GAA0B,KAFlC,CAAP;AAGH;;AACOK,EAAAA,yBAAR,CAAkCC,IAAlC,EAAwCC,KAAxC,EAA+C;AAC3C,SAAKd,eAAL,CAAqBC,aAArB,CAAmCY,IAAnC,IAA2CC,KAA3C;AACH;;AACOC,EAAAA,gBAAR,CAAyBF,IAAzB,EAA+BC,KAA/B,EAAsCE,GAAtC,EAA2C;AACvC,SAAKhB,eAAL,CAAqBgB,GAArB,EAA0BH,IAA1B,IAAkCC,KAAlC;AACH;;AACOG,EAAAA,mBAAR,GAA6B;AACzB,SAAKjB,eAAL,GAAuB3B,SAAS,CAACY,QAAV,CAAmBC,IAAnB,CAAwBgC,QAAxB,CAAiClB,eAAxD;AACH;;AA3BmB,C,0FACnB/B,U;;;;;WAA4B;AACzBwC,MAAAA,eAAe,EAAC,EADS;AAEzBU,MAAAA,WAAW,EAAC;AAFa,K;;mFAI5BlD,U;;;;;WAA4B,IAAI+B,eAAJ,E;;sFAC5B/B,U;;;;;WAA8B,K;;iEAC9BC,M,yJAMAA,M,sKAMAA,M,uKAGAA,M,iKAGAA,M,0GAIL;;AACA,eAAe,IAAImC,iBAAJ,EAAf","sourcesContent":["import { observable, action, computed} from \"mobx\";\nimport ConfigStore from \"./configStore\"\nimport AuthStore from \"./AuthStore\"\n\nconst apis = {\n    applyApplication(data) {\n        console.log(data);\n        return fetch(ConfigStore.configData.domain + 'api/users/applyApplication', {\n            method: 'POST',\n            headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/json',\n              'Authorization': 'Token ' + AuthStore.authData.user.token\n            },\n            body: JSON.stringify({\n              \"applicationObj\": {\n                  \"userName\":AuthStore.authData.user.userName,\n                  \"applicationData\":data\n                }\n            }),\n          })\n          .then((response) => response.json())\n          .then((responseJson) => {\n            if(responseJson){\n              console.log(responseJson)\n              AuthStore.setUserDataLocal(responseJson);\n\n              //AuthStore.setUserDataLocal(responseJson);\n              //AuthStore.login();\n            }else{\n             \n            }        \n            return responseJson;\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n    },\n    register (data){\n        return fetch(ConfigStore.configData.domain + 'api/users/', {\n            method: 'POST',\n            headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              \"user\": data\n            }),\n          })\n          .then((response) => response.json())\n          .then((responseJson) => {\n            if(responseJson.user){\n              console.log(responseJson)\n              AuthStore.setUserDataLocal(responseJson);\n              //AuthStore.login();\n            }else{\n             \n            }        \n            return responseJson;\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n    }\n}\nclass applicationData{\n    applicantInfo={};\n    spouseInfo={};\n    childrenInfo=[];\n    addressContact={};\n};\nclass registrationStore {\n    @observable registrationData={\n        personalDetails:{},\n        paymentData:{}\n    };\n    @observable applicationData= new applicationData();\n    @observable registerInProgress=false;\n    @action registerUser() {\n        this.registerInProgress = true;\n        return apis.register(this.registrationData.personalDetails).then((data)=>{\n            return data;\n        }).finally(()=>this.registerInProgress = false);\n    }\n    @action sendApplication () {\n        this.registerInProgress = true;\n        return apis.applyApplication(this.applicationData).then((data)=>{\n            return data;\n        }).finally(()=>this.registerInProgress = false);\n    };\n    @action handleApplicantDataChange(attr, value) {\n        this.applicationData.applicantInfo[attr] = value;\n    }\n    @action handleDataChange(attr, value, obj) {\n        this.applicationData[obj][attr] = value;\n    }\n    @action initApplicationData(){\n        this.applicationData = AuthStore.authData.user.userData.applicationData\n    }\n}\n//export default registrationStore;\nexport default new registrationStore();"]},"metadata":{},"sourceType":"module"}